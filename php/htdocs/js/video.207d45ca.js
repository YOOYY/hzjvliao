(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["video"],{"81a8":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"banner"}},[a("v-headpanel",[a("em",[t._v("视频列表")]),t._v(" 可以使用URL链接或者上传本地视频 ")]),a("el-row",t._l(t.videos,(function(e,n){return a("el-col",{key:n,style:n%4===0?"clear:both":"",attrs:{span:5,offset:n%4===0?0:1}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("video",{staticClass:"image",attrs:{src:e.path,controls:""}}),a("div",{staticClass:"buttonbar"},[a("span",{staticClass:"title"},[t._v("视频"+t._s(n+1))]),a("v-upload",{attrs:{rules:{name:"video"+(n+1),mime:["video/mp4"]},title:"上传视频"},on:{upload:t.updated},nativeOn:{click:function(a){return t.updateCur(e.id,n)}}}),a("el-button",{staticClass:"upload",staticStyle:{"margin-right":"10px"},attrs:{type:"danger",size:"small"},on:{click:function(a){return t.open(e.id,n)}}},[t._v(" 填写URL ")])],1)])],1)})),1)],1)},s=[],i=a("efe2"),c=(a("74e1"),a("b3bc")),o=a("d443"),r=a("7736"),u={data:function(){return{url:"video",videos:[],current:{index:0,id:1}}},methods:{open:function(t,e){var a=this;this.$prompt("请输入URL","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/,inputErrorMessage:"URL格式不正确"}).then((function(n){var s=n.value;a.ajax("update",{type:"video",id:t,path:s}).then((function(n){a.$message({type:"success",message:"填写URL成功"}),a.videos.splice(e,1,{id:t,path:s})})).catch((function(t){a.$message({type:"error",message:"操作失败"+t})}))})).catch((function(){a.$message({type:"info",message:"取消输入"})}))},updateCur:function(t,e){this.current={id:t,index:e}},updated:function(t){var e=this;console.log(t),this.ajax("update",{type:"video",id:this.current.id,path:t}).then((function(t){e.videos.splice(e.current.index,1,t),e.$message({type:"success",message:"上传成功！"})})).catch((function(t){e.$message({type:"success",message:"上传失败！"+t})}))}},created:function(){var t=this;return this.get("list",{type:"video"}).then((function(e){t.videos=e})).catch((function(e){t.$message({type:"warning",message:"获取列表失败!失败原因:"+e})}))},computed:Object(i["a"])({},Object(r["c"])(["website"])),components:{"v-headpanel":c["a"],"v-upload":o["a"]}},d=u,p=(a("da3a"),a("4ac2")),l=Object(p["a"])(d,n,s,!1,null,null,null);e["default"]=l.exports},b914:function(t,e,a){},da3a:function(t,e,a){"use strict";a("b914")}}]);
//# sourceMappingURL=video.207d45ca.js.map
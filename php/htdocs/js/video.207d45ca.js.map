{"version":3,"sources":["webpack:///./src/views/Video.vue?8f7f","webpack:///src/views/Video.vue","webpack:///./src/views/Video.vue?5a7c","webpack:///./src/views/Video.vue","webpack:///./src/views/Video.vue?169a"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","_l","o","index","key","style","padding","staticClass","path","_s","name","mime","on","updated","nativeOn","$event","updateCur","id","staticStyle","open","staticRenderFns","component"],"mappings":"gHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,WAAW,CAACF,EAAG,cAAc,CAACA,EAAG,KAAK,CAACJ,EAAIO,GAAG,UAAUP,EAAIO,GAAG,yBAAyBH,EAAG,SAASJ,EAAIQ,GAAIR,EAAU,QAAE,SAASS,EAAEC,GAAO,OAAON,EAAG,SAAS,CAACO,IAAID,EAAME,MAAOF,EAAM,IAAM,EAAI,aAAe,GAAIJ,MAAM,CAAC,KAAO,EAAE,OAASI,EAAM,IAAM,EAAI,EAAI,IAAI,CAACN,EAAG,UAAU,CAACE,MAAM,CAAC,aAAa,CAAEO,QAAS,SAAU,CAACT,EAAG,QAAQ,CAACU,YAAY,QAAQR,MAAM,CAAC,IAAMG,EAAEM,KAAK,SAAW,MAAMX,EAAG,MAAM,CAACU,YAAY,aAAa,CAACV,EAAG,OAAO,CAACU,YAAY,SAAS,CAACd,EAAIO,GAAG,KAAKP,EAAIgB,GAAGN,EAAM,MAAMN,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,CAACW,KAAK,SAASP,EAAM,GAAGQ,KAAK,CAAC,cAAc,MAAQ,QAAQC,GAAG,CAAC,OAASnB,EAAIoB,SAASC,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOtB,EAAIuB,UAAUd,EAAEe,GAAGd,OAAWN,EAAG,YAAY,CAACU,YAAY,SAASW,YAAY,CAAC,eAAe,QAAQnB,MAAM,CAAC,KAAO,SAAS,KAAO,SAASa,GAAG,CAAC,MAAQ,SAASG,GAAQ,OAAOtB,EAAI0B,KAAKjB,EAAEe,GAAGd,MAAU,CAACV,EAAIO,GAAG,cAAc,MAAM,MAAK,IAAI,IACp+BoB,EAAkB,G,4DCgDtB,GACE,KADF,WAEI,MAAJ,CACM,IAAN,QACM,OAAN,GACM,QAAN,CACQ,MAAR,EACQ,GAAR,KAIE,QAAF,CACI,KADJ,SACA,KAAM,IAAN,OACM,KAAN,uBACQ,kBAAR,KACQ,iBAAR,KACQ,aAAR,wFACQ,kBAAR,aACA,kBAAQ,IAAR,UACQ,EAAR,eAAU,KAAV,QAAU,GAAV,EAAU,KAAV,IACA,kBACU,EAAV,UACY,KAAZ,UACY,QAAZ,YAEU,EAAV,mBAAY,GAAZ,EAAY,KAAZ,OAEA,mBACU,EAAV,UACY,KAAZ,QACY,QAAZ,iBAGA,kBACQ,EAAR,UACU,KAAV,OACU,QAAV,aAII,UA7BJ,SA6BA,KACM,KAAN,SAAQ,GAAR,EAAQ,MAAR,IAEI,QAAJ,YAAM,IAAN,OACM,QAAN,OACM,KAAN,eAAQ,KAAR,QAAQ,GAAR,gBAAQ,KAAR,IACA,kBACQ,EAAR,mCACQ,EAAR,UACU,KAAV,UACU,QAAV,aAGA,mBACQ,EAAR,UACU,KAAV,UACU,QAAV,iBAKE,QA7DF,WA6DI,IAAJ,OACI,OAAJ,iBAAM,KAAN,UACA,kBACM,EAAN,YAEA,mBACM,EAAN,UACQ,KAAR,UACQ,QAAR,uBAIE,SAAF,kBACA,6BAEE,WAAF,CACI,cAAJ,OACI,WAAJ,SC/Hmb,I,wBCQ/aC,EAAY,eACd,EACA7B,EACA4B,GACA,EACA,KACA,KACA,MAIa,aAAAC,E,kECnBf","file":"js/video.207d45ca.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"banner\"}},[_c('v-headpanel',[_c('em',[_vm._v(\"视频列表\")]),_vm._v(\" 可以使用URL链接或者上传本地视频 \")]),_c('el-row',_vm._l((_vm.videos),function(o,index){return _c('el-col',{key:index,style:(index%4 === 0 ? 'clear:both' : ''),attrs:{\"span\":5,\"offset\":index%4 === 0 ? 0 : 1}},[_c('el-card',{attrs:{\"body-style\":{ padding: '0px' }}},[_c('video',{staticClass:\"image\",attrs:{\"src\":o.path,\"controls\":\"\"}}),_c('div',{staticClass:\"buttonbar\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"视频\"+_vm._s(index+1))]),_c('v-upload',{attrs:{\"rules\":{name:'video'+(index+1),mime:['video/mp4']},\"title\":\"上传视频\"},on:{\"upload\":_vm.updated},nativeOn:{\"click\":function($event){return _vm.updateCur(o.id,index)}}}),_c('el-button',{staticClass:\"upload\",staticStyle:{\"margin-right\":\"10px\"},attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.open(o.id,index)}}},[_vm._v(\" 填写URL \")])],1)])],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"banner\">\n        <v-headpanel>\n            <em>视频列表</em>\n            可以使用URL链接或者上传本地视频\n        </v-headpanel>\n        <el-row>\n            <el-col\n                :span=\"5\"\n                v-for=\"(o, index) in videos\"\n                :key=\"index\"\n                :offset=\"index%4 === 0 ? 0 : 1\"\n                :style=\"index%4 === 0 ? 'clear:both' : ''\"\n            >\n                <el-card :body-style=\"{ padding: '0px' }\">\n                    <video\n                        :src=\"o.path\"\n                        controls\n                        class=\"image\"\n                    ></video>\n                    <div class=\"buttonbar\">\n                        <span class=\"title\">视频{{index+1}}</span>\n                        <v-upload\n                            @upload=\"updated\"\n                            @click.native=\"updateCur(o.id,index)\"\n                            :rules=\"{name:'video'+(index+1),mime:['video/mp4']}\"\n                            title=\"上传视频\"\n                        ></v-upload>\n                        <el-button\n                            type=\"danger\"\n                            size=\"small\"\n                            class=\"upload\"\n                            style=\"margin-right:10px\"\n                            @click=\"open(o.id,index)\"\n                        >\n                            填写URL\n                        </el-button>\n                    </div>\n                </el-card>\n            </el-col>\n        </el-row>\n    </div>\n</template>\n\n<script>\nimport Headpanel from \"../components/Headpanel.vue\";\nimport Upload from \"../components/Upload.vue\";\nimport { mapState } from \"vuex\";\n\nexport default {\n    data() {\n        return {\n            url: \"video\",\n            videos: [],\n            current:{\n                index:0,\n                id:1\n            }\n        };\n    },\n    methods: {\n        open(id,index) {\n            this.$prompt('请输入URL', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            inputPattern: /^(https?:\\/\\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\\.)+[a-zA-Z]+)(:\\d+)?(\\/.*)?(\\?.*)?(#.*)?$/,\n            inputErrorMessage: 'URL格式不正确'\n            }).then(({ value }) => {\n                this.ajax('update', {type:'video',id,path:value})\n                .then(res => {\n                    this.$message({\n                        type: 'success',\n                        message: '填写URL成功'\n                    });\n                    this.videos.splice(index, 1, {id,path:value});\n                })\n                .catch(err => {\n                    this.$message({\n                        type: \"error\",\n                        message: \"操作失败\" + err\n                    });\n                });\n            }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: '取消输入'\n                });\n            });\n        },\n        updateCur(id,index){\n            this.current = {id,index};\n        },\n        updated: function(url) {\n            console.log(url);\n            this.ajax('update',{type:'video',id:this.current.id,path:url})\n            .then((res)=>{\n                this.videos.splice(this.current.index, 1, res);\n                this.$message({\n                    type: \"success\",\n                    message: \"上传成功！\"\n                });\n            })\n            .catch((err)=>{\n                this.$message({\n                    type: \"success\",\n                    message: \"上传失败！\"+err\n                });\n            })\n        }\n    },\n    created() {\n        return this.get(\"list\",{type:'video'})\n            .then(res => {\n                this.videos = res;\n            })\n            .catch(e => {\n                this.$message({\n                    type: \"warning\",\n                    message: \"获取列表失败!失败原因:\" + e\n                });\n            });\n    },\n    computed: {\n        ...mapState([\"website\"])\n    },\n    components: {\n        \"v-headpanel\": Headpanel,\n        \"v-upload\": Upload\n    }\n};\n</script>\n\n<style lang='scss'>\n#banner {\n    .button {\n        padding: 0;\n        float: right;\n    }\n\n    .image {\n        width: 100%;\n        display: block;\n    }\n    .el-col {\n        margin-bottom: 30px;\n    }\n    .buttonbar {\n        padding: 14px;\n        font-size: 18px;\n        .title {\n            line-height: 34px;\n        }\n        span {\n            font-size: 18px;\n            // line-height: 48px;\n        }\n        .upload {\n            float: right;\n            margin-bottom: 12px;\n        }\n    }\n}\n</style>\n","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Video.vue?vue&type=template&id=5770f1d6&\"\nimport script from \"./Video.vue?vue&type=script&lang=js&\"\nexport * from \"./Video.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Video.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.7@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}